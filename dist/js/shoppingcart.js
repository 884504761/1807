"use strict";require(["config"],function(){require(["jquery","header","footer","template","reckon","jquery-cookie"],function(c,a,s,e,o){new Promise(function(s,i){c("header").load("/html/component/header.html",function(){s()}),c("footer").load("/html/component/footer.html",function(){})}).then(function(){a.nav(),a.barrage(),a.fix(),a.isLogin(),a.head_search();try{a.head_cart()}catch(s){console.log("not found cookie")}}).then(function(){var s=c.cookie("cart");if(s){var i=JSON.parse(s),t=e("pro-template",{products:{products:i}.products});c("#addli").html(t)}else c(".Products").addClass("isProduct").siblings().removeClass("isProduct")}).then(function(){var s=c("#addli");console.log(s),o.unitprice(),o.totals(),c(s).on("click",".revise",function(){if(console.log(this),"edit"===this.id&&(c(this).css("display","none").siblings("#del").css("display","block"),c(this).siblings("#true").css("display","block").siblings("#cancel").css("display","block"),c(this).parent().parent().find(".num").css("display","block").siblings().css("display","none").siblings().find(".the_num").val(c(this).parent().parent().find("._num").html()),c(this).parent().parent().find(".choice_size").css("display","block").find(".size_old").html(c(this).parent().parent().find(".old_size").html())),"true"===this.id&&(c(this).siblings("#edit").css("display","block"),c(this).css("display","none").siblings("#cancel").css("display","none"),c(this).parent().parent().find(".num").css("display","none").siblings().css("display","block").html(c(this).parent().parent().find(".the_num").val()),c(this).parent().parent().find(".old_size").html(c(this).parent().parent().find(".size_old").html()).parent().parent().parent().find(".choice_size").css("display","none"),o.rush(),o.unitprice(),o.totals(),a.head_cart()),"del"===this.id){var s=c.cookie("cart"),i=JSON.parse(s),t=c(this).parent().parent().index();i.splice(t,1);var e=JSON.stringify(i);c.cookie("cart",e,{expires:7}),c(this).parent().parent().remove(),o.totals();var n=c.cookie("cart");"[]"==n?(c.cookie("cart","",{expires:-1,path:"/"}),c(".Products").addClass("isProduct").siblings().removeClass("isProduct")):console.log(n,11)}"cancel"===this.id&&(c(this).parent().parent().find(".num").css("display","none").siblings().css("display","block").parent().parent().find(".choice_size").css("display","none"),c(this).css("display","none").siblings("#true").css("display","none").siblings("#edit").css("display","block").siblings("#del").css("display","block"),o.unitprice(),o.totals())}),c(".res").click(function(){var s=parseInt(c(this).siblings(".the_num").val());1===s?console.log("不能再减了"):c(this).siblings(".the_num").val(--s),o.xunitprice(this)}),c(".add").click(function(){var s=parseInt(c(this).siblings(".the_num").val());c(this).siblings(".the_num").val(++s),o.xunitprice(this)});var t=c("#allcheck"),e=c(".checks");t.click(function(){var s=0;if(t.is(":checked")){for(var i=0;i<e.length;i++)c(e[i]).prop("checked",!0);s=e.length}else{for(i=0;i<e.length;i++)c(e[i]).prop("checked",!1);s=0}c(".pitch").html(s),o.totals()}),e.click(function(){for(var s=0,i=0;i<e.length;i++)c(e[i]).is(":checked")&&s++;c(".pitch").html(s),s===e.length?t.prop("checked",!0):t.prop("checked",!1),o.totals()}),t.click(),c(".size_top").click(function(){c(this).parent().find(".size_bottom").hasClass("ac")?(c(this).parent().find(".size_bottom").removeClass("ac"),c(this).find("span").css("transform","rotate(0deg)")):(c(this).parent().find(".size_bottom").addClass("ac"),c(this).find("span").css("transform","rotate(180deg)"))}),c(".size_bottom").on("click","li",function(){c(this).parent().parent().find(".size_old").html(c(this).html()),c(this).parent().addClass("ac"),c(this).parent().parent().find("span").css("transform","rotate(180deg)")})})})});