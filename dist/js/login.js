"use strict";require(["config"],function(){require(["jquery","header","footer","jquery-cookie"],function(s,o,e){new Promise(function(o,e){s("header").load("/html/component/header.html",function(){o()}),s("footer").load("/html/component/footer.html",function(){})}).then(function(){o.nav(),o.barrage(),o.head_search(),o.fix();try{o.head_cart()}catch(o){console.log("not found cookie")}}).then(function(){var o=s.cookie("data"),e=s.cookie("user");if(e){console.log(e);var a={},r=e.split(":");console.log(r),s("#username").val(r[1])}if(o){a={},r=o.split(",");for(var t in r){var n=r[t].split(":");a[n[0]]=n[1]}s("#username").val(a.username),s("#password").val(a.password)}s("form").submit(function(o){var e=s("#username").val(),a=s("#password").val();console.log(e);var r={username:e,password:a};s.ajax({method:"post",data:r,dataType:"json",url:"http://localhost/api/login.php",success:function(o){console.log(o),1===o.code?(alert("登录成功"),s.cookie("username",e,{path:"/"}),s("#remb").is(":checked")&&(r=JSON.stringify(r),s.cookie("data","username:"+e+",password:"+a,{expires:7})),s(location).attr("href","/")):alert("用户名或者密码错误")}}),o.preventDefault()})})})});