"use strict";require(["config"],function(){require(["jquery","header","footer"],function(l,o,e){new Promise(function(o,e){l("header").load("/html/component/header.html",function(){o()}),l("footer").load("/html/component/footer.html",function(){})}).then(function(){o.nav(),o.barrage(),o.fix(),o.head_search();try{o.head_cart()}catch(o){console.log("not found cookie")}}).then(function(){var t=!1,n=!1,r=!1;l("#username").blur(function(){var o=l("#username").val();if(/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/.test(o)||/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(o)){l("#promote1").css("display","none");o=l("#username").val();console.log(o);var e={username:o};l.ajax({method:"post",data:e,dataType:"json",url:"http://localhost/api/isuser.php",success:function(o){console.log(o),1===o.code?(t=!0,l("#promote_name").css("display","none")):l("#promote_name").css("display","block")}})}else l("#promote1").css("display","block"),l("#promote_name").css("display","none"),t=!1}),l("#password").blur(function(){var o=l("#password").val();n=/^(?![0-9]+$)(?![a-zA-Z]+$)(?![~!@&%$^\\(\\)#_]+$)[0-9A-Za-z~!@&%$^\\(\\)#_]{8,16}$/.test(o)?(l("#promote2").css("display","none"),!0):(l("#promote2").css("display","block"),!1)}),l("#_password").blur(function(){var o=l("#password").val(),e=l("#_password").val();r=o!=e?(l("#promote3").css("display","block"),!1):(l("#promote3").css("display","none"),!0)}),l("form").submit(function(o){var e=l("#username").val(),s=l("#password").val();l("#_password").val(),l("promote");if(t&&n&&r)if(l("#ck1").is(":checked")&&l("#ck2").is(":checked")){var a={username:e,password:s};l.ajax({method:"post",data:a,dataType:"json",url:"http://localhost/api/insert.php",success:function(o){console.log(o),1===o.code?(alert("注册成功"),l.cookie("user","username:"+e,{expires:7}),l(location).attr("href","/html/login.html")):alert("用户已存在")}})}else alert("请确认用户条款");else alert("请填写正确的注册信息");console.log(e),o.preventDefault()})})})});