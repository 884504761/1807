"use strict";require(["config"],function(){require(["jquery","header","footer","tabs","template","magnifier","jquery-cookie"],function(h,d,e,i,c,o){new Promise(function(e,o){h("header").load("/html/component/header.html",function(){e()}),h("footer").load("/html/component/footer.html",function(){})}).then(function(){d.nav(),d.barrage(),d.fix(),d.isLogin(),d.head_search();try{d.head_cart()}catch(e){console.log("not found cookie")}}).then(function(){var e=location.search.slice(1);console.log(e),h("#describe-title1 ._title").click(function(e){h("#describe-main").slideToggle("slow"),h(this).addClass("ac").siblings().removeClass("ac")}),h("#describe-title2 ._title").click(function(e){h("#size-specification").slideToggle("slow"),h(this).addClass("ac").siblings().removeClass("ac")}),h.ajax({method:"get",url:"http://rap2api.taobao.org/app/mock/115083/products?"+e,success:function(e){console.log(e);var o=c("pro-template",{products:e.products});h("#proList").html(o),console.log("延时"),i.show()}}).then(function(){var u=location.search.slice(1);console.log(u),h("#add").click(function(){h("#_num").val(parseInt(h("#_num").val())+1)}),h("#res").click(function(){var e=parseInt(h("#_num").val());1<e&&h("#_num").val(--e)}),h(".change_size").on("click","li",function(){h(this).addClass("this_size").siblings().removeClass("this_size")}),h("#addCar").click(function(){var e=[],o=h("#first_pic")[0].src,i=h("#name").html(),c=h(".change_size").find(".this_size").html();if(c){var n=h("#price").html(),s=parseInt(h("#_num").val());if(h.cookie("cart")){var t=!1;e=JSON.parse(h.cookie("cart"));for(var a=0;a<e.length;a++)e[a].id!==u||(e[a].num++,t=!0,console.log(t),console.log(111));if(!t){var l={id:u,name:i,pic:o,size:c,price:n,num:s};console.log(222),e.push(l)}}else{l={id:u,name:i,pic:o,size:c,price:n,num:s};e.push(l)}console.log(e);var r=JSON.stringify(e);h.cookie("cart",r,{expires:7}),d.head_cart(),h("#cart").slideDown("slow"),setTimeout(function(){h("#cart").slideUp("slow")},1e3)}else alert("请选择尺码")})}).then(function(){o.show()})})})});